<html xmlns:th="http://www.thymeleaf.org">

<head th:include="layout :: head(title=~{::title},links=~{})">
<title>Manage Satisfaction Surveys</title>
</head>

<body th:include="layout :: body" th:with="content=~{::content}">

	<div th:fragment="content">

		<script th:inline="javascript">
			/* Otherwise Thymeleaf tries to parse Javascript as XML and breaks itself sometimes.  Sigh */
			/*<![CDATA[*/
			var app = angular.module("viewSatisfactionSurveysAdminApp", []);
			
			/**
			 * A filter to humanize the text to be more user friendly.
			 */
			 app.filter('humanize', function() {
				return function(input) {
					return !input ? input : input.toLowerCase().split('_')
						.map((word) => word.charAt(0).toUpperCase() + word.substring(1))
						.join(' ');
				}
            });

			app.controller('viewSatisfactionSurveysAdminCtrl', function ($scope, $http) {
				$scope.surveys = [];
				$scope.loadSurveys = function() {
					$http.get("/iTrust2/api/v1/surveys").then(
							function(response) {
								$scope.surveys=response.data;
								$scope.message = "";
							}, function(rejection) {
					              $scope.surveys = [];
					              $scope.message = "Could not display surveys";
							});
				}
				
				$scope.getTemplate = function (survey) {
<<<<<<< HEAD
                    return 'view';
                };
                
                $scope.loadSurveys();
				
=======
	          		return 'view';
	        	};

				$scope.loadSurveys();
			
>>>>>>> branch 'satisfaction-survey-frontend' of https://github.ncsu.edu/engr-csc326-spring2021/csc326-TP-212-1.git
			});
			/*]]>*/


		</script>
<<<<<<< HEAD
		 <div ng-app="viewSatisfactionSurveysAdminApp" ng-controller="viewSatisfactionSurveysAdminCtrl">
            <h3>Admin View Surveys</h3>
            <table class="table table-bordered">
                <caption>Existing Surveys:</caption>
                <thead>
                    <tr>
                        <th>HCP</th>
                        <th>Patient</th>
                        <th>Time Waited Waiting Room</th>
                        <th>Time Waited Examination Room</th>
                        <th>Satisfied Treatment</th>
                        <th>Satisfied Office Visit</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr name="satsfactionSurveys"
                        ng-repeat="s in surveys | orderBy: 'hcp_id'"
                        ng-include="getTemplate(s)" surveyId={{s.id}}>
                    </tr>
                </tbody>
            </table>
            <script type="text/ng-template" id="view">


            <td name="hcpCell">{{s.hcp.username}}</td>
            <td name="patientCell">{{s.patient.username}}</td>
            <td name="timeWaitingRoom">{{s.timeWaitedWaitingRoom}}</td>
            <td name="timeExamRoom">{{s.timeWaitedExaminationRoom}}</td>
            <td name="satisfiedTreatment">{{s.satisfiedTreatment}}</td>
            <td name="satisfiedOfficeVisit">{{s.satisfiedOfficeVisit}}</td>
            <td name="notes">{{s.notes}}</td>
			</script>

        </div>
=======
		<div ng-app="viewSatisfactionSurveysAdminApp" ng-controller="viewSatisfactionSurveysAdminCtrl">
			<h3>Admin View Surveys</h3>
			<table class="table table-bordered">
				<caption>Existing Surveys:</caption>
				<thead>
					<tr>
						<th>HCP</th>
						<th>Patient</th>
						<th>Time Waited Waiting Room</th>
						<th>Time Waited Examination Room</th>
						<th>Satisfied Treatment</th>
						<th>Satisfied Office Visit</th>
						<th>Notes</th>
					</tr>
				</thead>
				<tbody>
					<tr name="satsfactionSurveys"
						ng-repeat="s in surveys | orderBy: 'hcp_id'"
						ng-include="getTemplate(s)" surveyId={{s.id}}>
					</tr>
				</tbody>
			</table>
			<script type="text/ng-template" id="view"></script>

			<td name="hcpCell">{{s.satisfied_treatment}}</td>
			<td name="patientCell">{{s.patient_id.username}}</td>
			<td name="timeWaitingRoom">a</td>
			<td name="timeExamRoom">a</td>
			<td name="satisfiedTreatment">a</td>
			<td name="satisfiedOfficeVisit">a</td>
			<td name="notes"></td>


		</div>
>>>>>>> branch 'satisfaction-survey-frontend' of https://github.ncsu.edu/engr-csc326-spring2021/csc326-TP-212-1.git
		
</body>

</html>